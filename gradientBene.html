<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <canvas id="myCanvas"></canvas>
    <script>
        var canvas = document.getElementById('myCanvas');
        var ctx = canvas.getContext("2d");
        var glWidth = window.innerWidth
        var glHeight = window.innerHeight;

        canvas.width = glWidth;
        canvas.height = glHeight;

        var rectangle = { x: 50, y: 50, width: 80, height: 40, color : "33BB97" };
        
        function shadeColor2(color, percent) {
            var f = parseInt(color.slice(1), 16), t = percent < 0 ? 0 : 255, p = percent < 0 ? percent * -1 : percent, R = f >> 16, G = f >> 8 & 0x00FF, B = f & 0x0000FF;
            return "#" + (0x1000000 + (Math.round((t - R) * p) + R) * 0x10000 + (Math.round((t - G) * p) + G) * 0x100 + (Math.round((t - B) * p) + B)).toString(16).slice(1);
        }

        function drawGradientRect(){
            let withDivider = 8;
            let heightDivider = 4;

            let rectPart = { width:(rectangle.width / withDivider), height: (rectangle.height / heightDivider)};


            for(var c = 0; c < rectangle.width; c += rectPart.width){
                let percentwidth = c / rectangle.width;
                for(var r = 0; r < rectangle.height; r += rectPart.height){
                    let percentheight = r / rectangle.height;
                    let percent = ((percentwidth + percentheight) / 2 ) * 1.5 -0.75;
                    ctx.beginPath();
                    ctx.rect(rectangle.x + c, rectangle.y + r, rectPart.width, rectPart.height);
                    ctx.fillStyle = shadeColor2(rectangle.color, percent);
                    ctx.fill();
                    ctx.closePath();
                }
            }
        }
        
        drawGradientRect();

    </script>
</body>

</html>